<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sujoy Mudi — Geospatial Dashboard</title>
  <meta name="description" content="Geospatial dashboard and portfolio of Sujoy Mudi — GeoAI, MRV, natural hazards, forest carbon." />
  <!-- Fonts & icons -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/a2d9b9c7b6.js" crossorigin="anonymous"></script>

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <style>
    :root{
      --bg:#061324;
      --panel:#071827;
      --muted:#9fb0c8;
      --accent:#0ea5a3;
      --accent-2:#60a5fa;
      --card-radius:12px;
      --maxw:1400px;
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      color-scheme: dark;
    }
    *{box-sizing:border-box}
    html,body,#map{height:100%}
    body{
      margin:0; background:linear-gradient(180deg,#041021 0%, #061428 80%); color:#e6eef6;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      font-size:15px; line-height:1.4;
    }

    /* Layout */
    .dashboard {
      display:grid;
      grid-template-columns:320px 1fr 380px;
      gap:18px;
      max-width:var(--maxw);
      margin:18px auto;
      padding:12px;
      align-items:start;
    }

    /* Panels */
    .panel {
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:12px;
      padding:14px;
      border:1px solid rgba(255,255,255,0.03);
      box-shadow: 0 10px 30px rgba(0,0,0,0.6);
    }

    /* Left profile sidebar */
    .profile {
      display:flex;flex-direction:column;gap:12px;
      position:sticky; top:18px;
      height: calc(100vh - 36px);
      overflow:auto;
      padding-bottom:20px;
    }
    .profile .photo{
      width:100%;height:220px;border-radius:10px;overflow:hidden;background:rgba(255,255,255,0.02);display:flex;align-items:center;justify-content:center;
    }
    .profile .photo img{width:100%;height:100%;object-fit:cover;display:block}
    .profile h2{margin:8px 0 2px;font-size:18px}
    .profile .role{color:var(--muted);font-size:13px;margin-bottom:6px}
    .stats{display:flex;gap:8px;flex-wrap:wrap}
    .stat{background:rgba(255,255,255,0.02);padding:10px;border-radius:8px;flex:1;min-width:120px;text-align:center}
    .stat .n{font-weight:800;font-size:18px}
    .muted{color:var(--muted)}
    .profile .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 12px;border-radius:10px;background:var(--accent);color:#042014;font-weight:700;border:none;cursor:pointer}
    .profile .btn.ghost{background:transparent;color:var(--muted);border:1px solid rgba(255,255,255,0.04)}
    .profile .links{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    .links a{color:var(--muted);font-weight:700}

    /* Center map */
    .map-wrap{height:80vh;min-height:420px;display:flex;flex-direction:column;gap:10px}
    #map{flex:1;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.03)}

    /* Map tools */
    .map-toolbar{display:flex;gap:8px;align-items:center;margin-top:6px}
    .tool{padding:8px 10px;border-radius:8px;background:rgba(255,255,255,0.02);color:var(--muted);font-weight:700;cursor:pointer}
    .tool.active{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#042014}

    /* Right column: tabs (Projects / Publications / Charts) */
    .right-col{position:sticky;top:18px;height:calc(100vh - 36px);overflow:auto;padding-bottom:20px;display:flex;flex-direction:column;gap:12px}
    .tabs{display:flex;gap:8px;margin-bottom:12px}
    .tab{padding:8px 12px;border-radius:999px;background:rgba(255,255,255,0.02);color:var(--muted);cursor:pointer;font-weight:700}
    .tab.active{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#042014}
    .list{display:flex;flex-direction:column;gap:10px}
    .project-card{padding:12px;border-radius:10px;background:rgba(255,255,255,0.01);border:1px solid rgba(255,255,255,0.02)}
    .project-card h4{margin:0 0 6px}
    .project-card p{margin:0;color:var(--muted);font-size:14px}
    .pub-item{padding:10px;border-radius:8px;background:rgba(255,255,255,0.01);border:1px solid rgba(255,255,255,0.02)}
    canvas{width:100% !important;height:auto !important}

    /* Responsive */
    @media (max-width:1100px){
      .dashboard{grid-template-columns:1fr;gap:12px;padding:12px}
      .profile{position:relative;height:auto}
      .right-col{position:relative;height:auto}
      .map-wrap{min-height:360px}
    }

    /* small sqrt badge */
    .sqrt{position:fixed;right:18px;bottom:14px;background:rgba(0,0,0,0.6);padding:8px 10px;border-radius:8px;font-weight:700;color:#cde;box-shadow:0 6px 18px rgba(2,6,23,0.6);z-index:999}
  </style>
</head>
<body>
  <div class="dashboard">

    <!-- LEFT: PROFILE / CONTROLS -->
    <aside class="panel profile" aria-label="Profile and controls">
      <div class="photo" id="profilePhoto">
        <!-- Replace the src with assets/img/profile-320.png in your repo. If no image found, initials shown. -->
        <img id="photoImg" src="assets/img/sujoy_headshot.png" alt="Portrait of Sujoy Mudi" onerror="this.style.display='none'; document.getElementById('initials').style.display='flex'">
        <div id="initials" style="display:none;width:100%;height:100%;align-items:center;justify-content:center;font-weight:800;font-size:36px">SM</div>
      </div>

      <div>
        <h2>Sujoy Mudi</h2>
        <div class="role muted">Senior Geospatial ML Engineer</div>
        <div style="margin-top:8px" class="muted">GeoAI • Forest Carbon MRV • Natural Hazards • Biomass Pipelines</div>
      </div>

      <div class="stats" style="margin-top:12px">
        <div class="stat"><div class="n">7+</div><div class="muted">Years</div></div>
        <div class="stat"><div class="n">15</div><div class="muted">Projects</div></div>
        <div class="stat"><div class="n">5</div><div class="muted">Selected pubs</div></div>
      </div>

      <div style="margin-top:12px">
        <button class="btn" onclick="location.href='Sujoy_Mudi_CV.pdf'"><i class="fas fa-file-pdf"></i> Download CV</button>
        <button class="btn ghost" style="margin-left:8px" onclick="location.href='#contact'"><i class="fas fa-envelope"></i> Contact</button>
      </div>

      <div class="links" style="margin-top:12px">
        <a href="https://www.linkedin.com/in/sujoy-mudi-182553129" target="_blank" rel="noopener noreferrer"><i class="fab fa-linkedin"></i> LinkedIn</a>
        <a href="https://scholar.google.com/citations?user=oVm7TyYAAAAJ&hl=en" target="_blank" rel="noopener noreferrer"><i class="fas fa-book"></i> Google Scholar</a>
        <a href="https://github.com/" target="_blank" rel="noopener noreferrer"><i class="fab fa-github"></i> GitHub</a>
      </div>

      <hr style="border:none;border-top:1px solid rgba(255,255,255,0.03);margin:12px 0">

      <div style="font-weight:700;margin-bottom:8px">Map controls</div>
      <div class="map-controls">
        <div class="tool active" id="toggleProjects" onclick="toggleLayer('projects')">Projects</div>
        <div class="tool active" id="togglePublications" onclick="toggleLayer('publications')">Publications</div>
        <div class="tool" id="zoomToAll" onclick="fitToAll()">Zoom to all</div>
      </div>

      <div style="margin-top:12px">
        <div style="font-weight:700;margin-bottom:6px">Basemap</div>
        <select id="basemapSelect" style="width:100%;padding:8px;border-radius:8px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);color:var(--muted)" onchange="changeBaseMap(this.value)">
          <option value="osm">OpenStreetMap (default)</option>
          <option value="sat">Esri World Imagery</option>
        </select>
      </div>

    </aside>

    <!-- CENTER: MAP -->
    <main class="panel map-wrap" aria-label="Map">
      <div id="map" role="application" aria-label="Interactive map"></div>
      <div class="map-toolbar">
        <div class="tool" id="infoTool" onclick="toggleInfo()">About this dashboard</div>
        <div class="tool" onclick="downloadMapPNG()">Export PNG</div>
        <div style="flex:1"></div>
        <div class="muted">Tip: Click map features for details</div>
      </div>
    </main>

    <!-- RIGHT: TABS (Projects / Publications / Charts) -->
    <aside class="panel right-col" aria-label="Details">
      <div>
        <div class="tabs" role="tablist" aria-label="Detail tabs">
          <div class="tab active" id="tabProjects" onclick="showTab('projects')">Projects</div>
          <div class="tab" id="tabPubs" onclick="showTab('publications')">Publications</div>
          <div class="tab" id="tabCharts" onclick="showTab('charts')">Charts</div>
        </div>

        <!-- Projects list -->
        <div id="tab-content-projects" class="list" style="display:block">
          <!-- sample project cards (same as geojson features) -->
          <div class="project-card">
            <h4>Forest Carbon MRV — Amazon pilot</h4>
            <p class="muted">Large-scale biomass estimation and project-level MRV with plot validation. <a href="https://www.mdpi.com/2072-4292/13/6/1066" target="_blank">Read paper</a></p>
            <div style="margin-top:8px"><button class="btn ghost" onclick="zoomToFeature('project_amazon')">View on map</button></div>
          </div>

          <div class="project-card">
            <h4>Natural Hazard Monitoring — Cyclone Amphan</h4>
            <p class="muted">Inundation mapping using Sentinel-1 SAR to assess cyclone impact and recovery. <a href="https://eprints.soton.ac.uk/457154/" target="_blank">Read case</a></p>
            <div style="margin-top:8px"><button class="btn ghost" onclick="zoomToFeature('project_amphan')">View on map</button></div>
          </div>

          <div class="project-card">
            <h4>RSGISWORLD — Open Learning</h4>
            <p class="muted">Open source e-learning platform for remote sensing & GIS. <a href="http://www.rsgisworld.com" target="_blank">Visit site</a></p>
            <div style="margin-top:8px"><button class="btn ghost" onclick="zoomToFeature('project_rsgis')">View on map</button></div>
          </div>
        </div>

        <!-- Publications -->
        <div id="tab-content-publications" style="display:none">
          <div class="list">
            <div class="pub-item">
              <strong>Automated Mapping for Long-Term Analysis of Shifting Cultivation in NE India</strong>
              <div class="muted">Das P., Mudi S., Behera M.D. — Remote Sensing (2021). <a href="https://www.mdpi.com/2072-4292/13/6/1066" target="_blank">Read</a></div>
            </div>
            <div class="pub-item">
              <strong>Estimating AGB & Tree Density using Sentinel-1</strong>
              <div class="muted">Roy S., Mudi S., Das P. — Springer (2021). <a href="https://link.springer.com/chapter/10.1007/978-3-030-56542-8_11" target="_blank">Read</a></div>
            </div>
            <div class="pub-item">
              <strong>Amphan inundation mapping using Sentinel-1</strong>
              <div class="muted">Behera M.D., Mudi S. — Tropical Ecology (2021). <a href="https://eprints.soton.ac.uk/457154/" target="_blank">Read</a></div>
            </div>
            <div style="margin-top:8px">
              <a class="pill" href="https://scholar.google.com/citations?user=oVm7TyYAAAAJ&hl=en" target="_blank">Full Google Scholar profile</a>
            </div>
          </div>
        </div>

        <!-- Charts -->
        <div id="tab-content-charts" style="display:none">
          <div style="margin-bottom:12px">
            <div style="font-weight:700;margin-bottom:8px">Project distribution</div>
            <canvas id="projectsChart" width="340" height="180"></canvas>
          </div>
          <div>
            <div style="font-weight:700;margin-bottom:8px">Publications by year</div>
            <canvas id="pubsChart" width="340" height="180"></canvas>
          </div>
        </div>

      </div>
    </aside>
  </div>

  <div class="sqrt">(√81)</div>

  <!-- JS: map data, UI interactions, charts -->
  <script>
    /*******************************
     * Sample GeoJSON features
     * Replace these features with your real project footprints / points.
     * Use real GeoJSON polygons or points. Keep property keys:
     * id, title, description, type ('project' or 'publication'), link.
     *******************************/
    const SAMPLE_GEOJSON = {
      "type": "FeatureCollection",
      "features": [
        {
          "type":"Feature",
          "properties":{
            "id":"project_amazon",
            "title":"Forest Carbon MRV — Amazon pilot",
            "description":"Biomass estimation pipeline; plot-based validation.",
            "type":"project",
            "link":"https://www.mdpi.com/2072-4292/13/6/1066"
          },
          "geometry":{
            "type":"Polygon",
            "coordinates":[[
              [-60.0,-3.0],
              [-59.2,-3.0],
              [-59.2,-3.6],
              [-60.0,-3.6],
              [-60.0,-3.0]
            ]]
          }
        },
        {
          "type":"Feature",
          "properties":{
            "id":"project_amphan",
            "title":"Cyclone Amphan inundation (case study)",
            "description":"SAR-based inundation mapping and damage assessment.",
            "type":"project",
            "link":"https://eprints.soton.ac.uk/457154/"
          },
          "geometry":{"type":"Point","coordinates":[88.36,22.58]}
        },
        {
          "type":"Feature",
          "properties":{
            "id":"project_rsgis",
            "title":"RSGISWORLD — Open Learning",
            "description":"Open-source tutorials and mapping demos.",
            "type":"project",
            "link":"http://www.rsgisworld.com"
          },
          "geometry":{"type":"Point","coordinates":[87.3,22.3]}
        },
        {
          "type":"Feature",
          "properties":{
            "id":"pub_shifting_cultivation",
            "title":"Shifting Cultivation mapping (2021)",
            "description":"Automated mapping method using Landsat/GEE.",
            "type":"publication",
            "link":"https://www.mdpi.com/2072-4292/13/6/1066"
          },
          "geometry":{"type":"Point","coordinates":[92.0,26.5]}
        }
      ]
    };

    /*******************************
     * Initialize the map & layers
     *******************************/
    // create map
    const map = L.map('map', {zoomControl:true, preferCanvas:true}).setView([22.6, 88.2], 6);

    // base layers
    const baseLayers = {
      osm: L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {maxZoom: 19, attribution: '© OSM'}),
      esri: L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {maxZoom: 19, attribution: 'Esri'})
    };
    baseLayers.osm.addTo(map);

    // style for projects and publications
    function styleFeature(feature){
      if(feature.properties.type === 'publication'){
        return {color:'#f59e0b', weight:2, opacity:0.9, fill:false};
      }
      return {color:'#16a34a', weight:2, opacity:0.9, fillColor:'rgba(22,163,74,0.08)', fillOpacity:0.5};
    }

    // create GeoJSON layer
    const geoJsonLayer = L.geoJSON(SAMPLE_GEOJSON, {
      style: styleFeature,
      pointToLayer: function(feature, latlng){
        const icon = L.divIcon({
          className: 'custom-marker',
          html: `<div style="background:${feature.properties.type==='publication'?'#f59e0b':'#16a34a'};width:14px;height:14px;border-radius:50%;box-shadow:0 2px 8px rgba(0,0,0,0.5)"></div>`,
          iconSize:[18,18], iconAnchor:[9,9]
        });
        return L.marker(latlng, {icon:icon});
      },
      onEachFeature: function(feature, layer){
        const p = feature.properties;
        const html = `<div style="font-weight:800;margin-bottom:6px">${p.title}</div>
                      <div style="font-size:13px;color:${'var(--muted)'}">${p.description || ''}</div>
                      <div style="margin-top:8px"><a href="${p.link}" target="_blank">Open resource</a></div>`;
        layer.bindPopup(html, {maxWidth:320});
        layer.featureId = p.id;
      }
    }).addTo(map);

    // store layers by type for toggling
    const layers = {
      projects: geoJsonLayer,
      publications: geoJsonLayer
    };

    // Fit to all features
    function fitToAll(){
      try{
        map.fitBounds(geoJsonLayer.getBounds(), {padding:[30,30]});
      }catch(e){ map.setView([22.6,88.2],6); }
    }

    // zoom to specific feature by id
    function zoomToFeature(id){
      let found = null;
      geoJsonLayer.eachLayer(l=>{
        if(l.feature && l.feature.properties && l.feature.properties.id === id){
          found = l;
        }
      });
      if(found){
        map.fitBounds(found.getBounds ? found.getBounds() : L.latLng(found.getLatLng()), {maxZoom:12, padding:[40,40]});
        found.openPopup();
      } else {
        alert('Feature not found on map');
      }
    }

    // toggle layer type (projects/publications) - demo: both use same layer here
    function toggleLayer(name){
      const el = document.getElementById('toggle'+capitalize(name));
      if(el.classList.contains('active')){
        el.classList.remove('active');
        map.removeLayer(layers[name]);
      } else {
        el.classList.add('active');
        map.addLayer(layers[name]);
      }
    }

    function capitalize(s){ return s.charAt(0).toUpperCase()+s.slice(1); }

    // change basemap
    function changeBaseMap(key){
      Object.values(baseLayers).forEach(l=>map.removeLayer(l));
      if(key === 'sat') baseLayers.esri.addTo(map);
      else baseLayers.osm.addTo(map);
    }

    // info modal (simple)
    function toggleInfo(){
      alert('This dashboard showcases geospatial projects, publications and metrics. Replace sample GeoJSON with your real project footprints or points (see the SAMPLE_GEOJSON object in the code).');
    }

    // Export map to PNG (uses leaflet-image if added later). Simple fallback: capture using html2canvas — not included by default.
    function downloadMapPNG(){
      alert('Export feature is not enabled in this demo. If you want PNG export, I can add html2canvas or leaflet-image support.');
    }

    // Fit once on load
    fitToAll();

    /*******************************
     * UI: Tabs and charts
     *******************************/
    function showTab(name){
      document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
      document.querySelectorAll('[id^="tab-content-"]').forEach(e=>e.style.display='none');
      document.getElementById('tab'+capitalize(name)).classList.add('active');
      document.getElementById('tab-content-'+name).style.display='block';
    }

    // wire tab ids to match showTab calls
    document.getElementById('tabProjects').id = 'tabProjects';
    document.getElementById('tabPubs').id = 'tabPubs';
    document.getElementById('tabCharts').id = 'tabCharts';

    // render charts
    function renderCharts(){
      // Projects Chart (pie by type)
      const projCounts = {project:0, publication:0};
      SAMPLE_GEOJSON.features.forEach(f=>{ if(f.properties.type === 'publication') projCounts.publication++; else projCounts.project++; });

      const ctx1 = document.getElementById('projectsChart').getContext('2d');
      new Chart(ctx1, {
        type:'doughnut',
        data:{
          labels:['Projects','Publications'],
          datasets:[{data:[projCounts.project, projCounts.publication], backgroundColor:['#16a34a','#f59e0b']}]
        },
        options:{plugins:{legend:{position:'bottom'}}}
      });

      // Publications by year (static from curated list)
      const pubData = [
        {year:2021, count:3},
        {year:2022, count:1}
      ];
      const ctx2 = document.getElementById('pubsChart').getContext('2d');
      new Chart(ctx2, {
        type:'bar',
        data:{labels:pubData.map(d=>d.year), datasets:[{label:'Pubs',data:pubData.map(d=>d.count),backgroundColor:'#60a5fa'}]},
        options:{scales:{y:{beginAtZero:true}},plugins:{legend:{display:false}}}
      });
    }
    renderCharts();

    /*******************************
     * Replace sample GeoJSON with your real projects:
     * - Edit SAMPLE_GEOJSON above or load a hosted geojson file:
     *    fetch('/data/my_projects.geojson').then(r=>r.json()).then(g=>{ L.geoJSON(g)... })
     * - Ensure projection is WGS84 (lon,lat).
     *******************************/

    /*******************************
     * Accessibility & keyboard shortcuts
     *******************************/
    document.addEventListener('keydown', (e)=>{
      if(e.key === '1') showTab('projects');
      if(e.key === '2') showTab('publications');
      if(e.key === '3') showTab('charts');
      if(e.key === 'f') fitToAll();
    });

    /*******************************
     * Small helpers for toggles (CSS id naming)
     *******************************/
    function toggleLayerUI(name){
      const el = document.getElementById('toggle'+capitalize(name));
      if(el) el.classList.toggle('active');
    }
    // init UI (sync toggle button IDs)
    document.getElementById('toggleProjects').id = 'toggleProjects';
    document.getElementById('togglePublications').id = 'togglePublications';

  </script>
</body>
</html>
